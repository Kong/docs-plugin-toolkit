{
  "fields": [
    {
      "protocols": {
        "required": true,
        "elements": {
          "one_of": [
            "grpc",
            "grpcs",
            "http",
            "https"
          ],
          "type": "string"
        },
        "default": [
          "grpc",
          "grpcs",
          "http",
          "https"
        ],
        "type": "set"
      }
    },
    {
      "config": {
        "required": true,
        "fields": [
          {
            "timeout": {
              "required": true,
              "default": 60000,
              "type": "number"
            }
          },
          {
            "keepalive": {
              "required": true,
              "default": 60000,
              "type": "number"
            }
          },
          {
            "aws_key": {
              "encrypted": true,
              "referenceable": true,
              "type": "string",
              "examples": [
                "<AWS_KEY>"
              ]
            }
          },
          {
            "aws_secret": {
              "encrypted": true,
              "referenceable": true,
              "type": "string",
              "examples": [
                "<AWS_SECRET>"
              ]
            }
          },
          {
            "aws_assume_role_arn": {
              "encrypted": true,
              "referenceable": true,
              "type": "string",
              "examples": [
                "<AWS_ASSUME_ROLE_ARN>"
              ],
              "description": "The target AWS IAM role ARN used to invoke the Lambda function. Typically this is\nused for a cross-account Lambda function invocation."
            }
          },
          {
            "aws_role_session_name": {
              "default": "kong",
              "type": "string",
              "examples": [
                "<AWS_ROLE_SESSION_NAME>"
              ],
              "description": "The identifier of the assumed role session. It is used for uniquely identifying\na session when the same target role is assumed by different principals or\nfor different reasons. The role session name is also used in the ARN of the assumed role principle."
            }
          },
          {
            "aws_region": {
              "type": "string",
              "examples": [
                "<AWS_REGION>"
              ],
              "description": "The AWS region where the Lambda function is located. The plugin does not\nattempt to validate the supplied region name. If an invalid region name\nis provided, the plugin responds with an HTTP `500 Internal Server Error`\nat runtime and logs a DNS resolution failure.\n\nThe plugin will automatically\ndetect the AWS region on runtime via `AWS_REGION` or `AWS_DEFAULT_REGION` environment\nvariables when neither `aws_region` nor `host` is specified in plugin configuration.\nUsing environment variables enables regionally distributed Kong cluster nodes\nto connect to the closest AWS region. If `aws_region`, `host` and environment\nvariables have not been specified, the plugin responds with an HTTP\n`500 Internal Server Error` at run-time."
            }
          },
          {
            "function_name": {
              "required": false,
              "type": "string",
              "examples": [
                "<LAMBDA_FUNCTION_NAME>"
              ]
            }
          },
          {
            "qualifier": {
              "type": "string"
            }
          },
          {
            "invocation_type": {
              "required": true,
              "one_of": [
                "RequestResponse",
                "Event",
                "DryRun"
              ],
              "default": "RequestResponse",
              "type": "string"
            }
          },
          {
            "log_type": {
              "required": true,
              "one_of": [
                "Tail",
                "None"
              ],
              "default": "Tail",
              "type": "string"
            }
          },
          {
            "host": {
              "type": "string",
              "description": "The host where the Lambda function is located. This value can point to a\nlocal Lambda server, allowing for easier debugging.\n\nEither `aws_region` or `host` must be provided."
            }
          },
          {
            "port": {
              "between": [
                0,
                65535
              ],
              "default": 443,
              "type": "integer"
            }
          },
          {
            "unhandled_status": {
              "between": [
                100,
                999
              ],
              "type": "integer"
            }
          },
          {
            "forward_request_method": {
              "default": false,
              "type": "boolean"
            }
          },
          {
            "forward_request_uri": {
              "default": false,
              "type": "boolean"
            }
          },
          {
            "forward_request_headers": {
              "default": false,
              "type": "boolean"
            }
          },
          {
            "forward_request_body": {
              "default": false,
              "type": "boolean"
            }
          },
          {
            "is_proxy_integration": {
              "default": false,
              "type": "boolean"
            }
          },
          {
            "awsgateway_compatible": {
              "default": false,
              "type": "boolean"
            }
          },
          {
            "proxy_scheme": {
              "one_of": [
                "http",
                "https"
              ],
              "type": "string"
            }
          },
          {
            "proxy_url": {
              "type": "string",
              "examples": [
                "http://my-proxy-server:3128"
              ]
            }
          },
          {
            "skip_large_bodies": {
              "default": true,
              "type": "boolean"
            }
          },
          {
            "base64_encode_body": {
              "default": true,
              "type": "boolean"
            }
          }
        ],
        "type": "record"
      }
    }
  ]
}
